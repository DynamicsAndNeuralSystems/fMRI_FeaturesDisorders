knitr::opts_chunk$set(echo = TRUE)
library(reticulate)
library(tidyverse)
library(reticulate)
use_python("/home/osboxes/anaconda3/bin/python3")
source_python("pickle_reader.py")
library(tidyverse)
library(reticulate)
use_python("/home/osboxes/anaconda3/bin/python3")
source_python("pickle_reader.py")
study <- "/media/sf_Shared_Folder/PhD_work/"
pydata_path <- paste0(study, "data/scz/UCLA/pydata/AROMA_2P/")
# Load subject metadata
subject_csv <- read.csv(paste0(study, "data/scz/UCLA/participants.csv"))
if (!file.exists(paste0(pydata_path, "UCLA_AROMA_2P_pyspi_res.Rds"))) {
pyspi_data_AROMA_2P_list <- list()
for (subject in unique(list.dirs(pydata_path, recursive = F, full.names = F))) {
subject_pkl <- extract_df_from_pkl(paste0(pydata_path, subject, "/calc.pkl")) %>%
mutate(Subject_ID = subject,
group = subset(subject_csv, sampleID == subject) %>% pull(diagnosis))
pyspi_data_AROMA_2P_list <- rlist::list.append(pyspi_data_AROMA_2P_list,
subject_pkl)
}
pyspi_data_AROMA_2P <- do.call(plyr::rbind.fill, pyspi_data_AROMA_2P_list)
corr_data <- subset(pyspi_data_AROMA_2P, SPI == "xcorr_mean_sig-True")
saveRDS(pyspi_data_AROMA_2P, file = paste0(pydata_path, "UCLA_AROMA_2P_pyspi_res.Rds"))
saveRDS(corr_data, file = paste0(pydata_path, "UCLA_AROMA_2P_pyspi_xcorr.Rds"))
} else {
corr_data <- readRDS(paste0(pydata_path, "UCLA_AROMA_2P_pyspi_xcorr.Rds"))
}
n
# TODO: convert to argparse
github_dir <- "/media/sf_Shared_Folder/github/fMRI_FeaturesDisorders/"
study <- "/media/sf_Shared_Folder/PhD_work/"
data_path <- paste0(study, "data/scz/UCLA/")
pydata_path <- paste0(study, "data/scz/UCLA/pydata/")
output_data_path <- paste0(study, "data/scz/UCLA/pydata/R_files/")
python_to_use <- "/home/osboxes/anaconda3/envs/pyspi/bin/python3"
set.seed(127)
# load libraries
library(theft)
library(tidyverse)
library(cowplot)
library(reticulate)
source_python(paste0(github_dir, "helper_functions/pickle_reader.py"))
theme_set(theme_cowplot())
# Load subject metadata
subject_csv <- read.csv(paste0(data_path, "participants.csv"))
noise_procs = c("AROMA+2P",
"AROMA+2P+GMR",
"AROMA+2P+DiCER")
source(paste0(github_dir, "helper_functions/pyspi_functions.R"))
setwd("/media/sf_Shared_Folder/github/fMRI_FeaturesDisorders/data_prep_and_QC")
source(paste0(github_dir, "helper_functions/pyspi_functions.R"))
read_pyspi_pkl_into_RDS(pydata_path = pydata_path,
noise_procs = noise_procs)
noise_proc = "AROMA+2P"
noise_label = gsub("\\+", "_", noise_proc)
# Define output data path
output_data_path <- paste0(pydata_path, noise_label, "/")
# Initialize list to store data
subj_data_list <- list()
subject = unique(list.dirs(pydata_path, recursive = F, full.names = F))[1]
# Define output data path
input_data_path <- paste0(pydata_path, noise_label, "/")
input_data_path
unique(list.dirs(input_data_path, recursive = F, full.names = F))
subject = unique(list.dirs(input_data_path, recursive = F, full.names = F))[1]
subject_pkl_data <- extract_df_from_pkl(paste0(input_data_path, subject, "/calc.pkl")) %>%
mutate(Subject_ID = subject,
group = subset(subject_csv, sampleID == subject) %>% pull(diagnosis))
github_dir <- "/media/sf_Shared_Folder/github/fMRI_FeaturesDisorders/"
study <- "/media/sf_Shared_Folder/PhD_work/"
data_path <- paste0(study, "data/scz/UCLA/")
pydata_path <- paste0(study, "data/scz/UCLA/pydata/")
output_data_path <- paste0(study, "data/scz/UCLA/pydata/R_files/")
python_to_use <- "/home/osboxes/anaconda3/envs/pyspi/bin/python3"
set.seed(127)
# load libraries
library(theft)
library(tidyverse)
library(cowplot)
library(reticulate)
source_python(paste0(github_dir, "helper_functions/pickle_reader.py"))
theme_set(theme_cowplot())
github_dir <- "/media/sf_Shared_Folder/github/fMRI_FeaturesDisorders/"
study <- "/media/sf_Shared_Folder/PhD_work/"
data_path <- paste0(study, "data/scz/UCLA/")
pydata_path <- paste0(study, "data/scz/UCLA/pydata/")
output_data_path <- paste0(study, "data/scz/UCLA/pydata/R_files/")
python_to_use <- "/home/osboxes/anaconda3/envs/pyspi/bin/python3"
set.seed(127)
# load libraries
library(theft)
init_theft(python_to_use)
github_dir <- "/media/sf_Shared_Folder/github/fMRI_FeaturesDisorders/"
study <- "/media/sf_Shared_Folder/PhD_work/"
data_path <- paste0(study, "data/scz/UCLA/")
pydata_path <- paste0(study, "data/scz/UCLA/pydata/")
output_data_path <- paste0(study, "data/scz/UCLA/pydata/R_files/")
python_to_use <- "/home/osboxes/anaconda3/envs/pyspi/bin/python3"
reticulate::use_python(python_to_use)
